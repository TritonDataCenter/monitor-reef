# Tarpaulin configuration for code coverage
# Run with: cargo tarpaulin

[default]
# Run coverage for entire workspace
workspace = true

# Timeout in seconds (5 minutes)
timeout = "300s"

# Minimum line coverage threshold (%)
fail-under = 40

# Exclude generated client code and vendored dependencies
exclude-files = [
    "clients/internal/*",
    "rust/*",
    "deps/*",
    # Templates
    "apis/api-template/*",
    "clients/internal/client-template/*",
    "services/service-template/*",
    # Legacy (not modernized)
    "libs/rebalancer-legacy/agent/*",
    "libs/rebalancer-legacy/manager/*",
    "libs/rebalancer-legacy/rebalancer/*",
    "libs/rust-utils/*",
]
